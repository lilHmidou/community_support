{% extends 'base.html.twig' %}

{% block title %}Mes Programmes{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ asset('styles/tutorat.css') }}">
{% endblock %}

{% block body %}
<div class="programs-container">

<h1>Mes Programmes</h1>

    {% if app.user.hasRole('ROLE_MENTOR') %}
        {% for program in app.user.userTutorat.mentorPrograms %}
    <div class="program-card">

                <h2>{{ program.titleP }}</h2>
                <p>{{ program.descriptionP }}</p>
                <p>Fréquence : {{ program.frequency }}</p>
                <h3>Étudiants inscrits :</h3>
                <ul>
                    {% for etudiant in program.etudiants %}
                        <li>{{ etudiant.user.firstName }} {{ etudiant.user.lastName }}</li>
                    {% else %}
                        <li>Aucun étudiant inscrit</li>
                    {% endfor %}
                </ul>
            </div>
        {% else %}
            <p>Aucun programme en cours</p>
        {% endfor %}
    {% elseif app.user.hasRole('ROLE_ETUDIANT') %}
        {% for program in app.user.userTutorat.etudiantPrograms %}
            <div class="program-card">
                <h2>{{ program.titleP }}</h2>
                <p>{{ program.descriptionP }}</p>
                <p>Fréquence : {{ program.frequency }}</p>
                <h3>Mentor :</h3>
                <ul>
                    <li>{{ program.mentor.user.firstName }} {{ program.mentor.user.lastName }}</li>
                </ul>
            </div>
        {% else %}
            <p>Aucun programme en cours</p>
        {% endfor %}
    {% else %}
            <p>Aucun programme en cours</p>
    {% endif %}
</div>
{% endblock %}
